# PTSI-App

近畿大学付属幼稚園 登降園管理システム

## 🎉 最新アップデート (2025-09-26)

### v3.0.0 - 企業向けマルチテナント対応 & 出席管理システム 🏢

- **🏢 マルチテナント機能**: 複数の保育園を一つのシステムで管理
  - 保育園選択システム（himawari-hoikuen, sakura-hoikuen, momiji-hoikuen）
  - テナント別データ管理とカスタマイズ
  - 独立したチャット機能と料金形態設定

- **🎯 登園退園管理システム**: 完全な出席管理機能を新規実装
  - リアルタイム出席統計（登園中・退園済み・未登園・出席率）
  - 学生検索・フィルタリング機能（名前・クラス・ステータス別）
  - ワンクリック登園・退園記録
  - クラス別出席状況の可視化
  - CSV形式での日次出席レポート出力

- **🎨 UI/UX統一**: 保護者側インターフェースのデザイン統一
  - PTSIブランドカラーへの統一
  - モダンなヘッダーデザイン
  - レスポンシブ対応の改善

- **🔧 システム安定性向上**: 管理者ダッシュボードのナビゲーションバグ修正

### v2.2.0 - 統計表示とダッシュボードの大幅強化 🚀

- **📊 高度な統計表示**: リアルタイム統計カード、クラス別統計、トレンド表示
- **📈 Chart.js統合**: 月次予約トレンド、週次出席率、クラス別分布の可視化
- **🔔 リアルタイム監視**: システムアラート、最近の活動監視、通知システム
- **📋 包括的レポート**: PDF/Excel/CSV形式でのエクスポート機能
- **🎨 モダンUI/UX**: レスポンシブデザイン、アニメーション効果、直感的操作

## 概要

PTSIは幼稚園・保育園向けの包括的な登降園管理Webアプリケーションです。**マルチテナント対応**により複数の保育園を一つのシステムで管理でき、保護者と園側の効率的なコミュニケーションと各種申請・出席管理を支援します。

## 🌟 主な機能

### 🏢 マルチテナント機能（v3.0新機能）

- **保育園選択システム**: 複数の保育園（ひまわり・さくら・もみじ保育園）を統合管理
- **テナント別カスタマイズ**: 各園独自のチャット機能・料金形態・設定
- **データ分離**: 園ごとの完全なデータ管理とプライバシー保護

### 🎯 登園退園管理システム（v3.0新機能）

- **リアルタイム出席統計**: 登園中・退園済み・未登園・出席率の自動計算
- **高度な検索機能**: 学生名・学籍番号・クラス・ステータス別フィルタリング
- **ワンクリック記録**: 簡単な登園・退園記録とタイムスタンプ自動記録
- **クラス別可視化**: 各クラスの出席状況を直感的に表示
- **レポート出力**: 日次出席データのCSV形式エクスポート

### 👥 認証・ユーザー管理

- **学生・保護者ログイン**: 学生IDとパスワードによる認証
- **管理者システム**: 運営者向け高度な管理機能
- **セキュリティ**: テナント別アクセス制御

### 📝 予約申請機能

- **多種申請対応**: 遅刻・早退・預かり保育・延長保育の申請
- **申請確認**: 提出済み申請の確認・管理
- **承認ワークフロー**: 園側での申請承認システム

### 💬 チャット機能

- **保護者向け**: クラス別チャットルーム、先生との個別連絡
- **職員向け**: 部署別グループチャット、緊急連絡システム
- **テナント対応**: 園ごとの独立したチャット環境
- **リアルタイム**: オンライン状況表示とリアルタイムメッセージング

### 📊 高度な管理・分析機能

- **統計ダッシュボード**: リアルタイム統計、クラス別分析、トレンド表示
- **データ可視化**: Chart.js統合による高度なグラフ表示（125+学生対応）
- **監視システム**: システムアラート、活動履歴、通知機能
- **レポート機能**: PDF/Excel/CSV形式での多彩なエクスポート
- **予約・学生管理**: 包括的な情報管理システム

### 📖 サポート機能

- **操作マニュアル**: 保護者・運営者向けPDF対応詳細ガイド
- **技術文書**: 完全な技術仕様書とAPI文書

## 🛠 技術スタック

- **Backend**: Node.js v24.8.0 + Express.js
- **Frontend**: HTML5 + CSS3 (Grid/Flexbox) + ES6+ JavaScript
- **Database**: CSV file system (マルチテナント対応)
- **Visualization**: Chart.js 4.x (高度なデータ可視化)
- **UI/UX**: レスポンシブデザイン、統一されたPTSIブランドデザイン
- **Architecture**: RESTful API、マルチテナントアーキテクチャ、モジュラー設計
- **Security**: テナント別データ分離、セッション管理、認証・認可

## インストール・起動方法

### 前提条件

- Node.js (v14以上推奨)
- npm

### セットアップ

```bash
cd PTSI-App
npm install
npm start
```

サーバーが起動したら、ブラウザで `http://localhost:3000` にアクセスしてください。

### 🎮 デモ用ログイン情報

#### 保護者ログイン

- **保育園選択**: ひまわり保育園 / さくら保育園 / もみじ保育園
- **ID**: `22001`
- **パスワード**: `22001`

#### 管理者ログイン

- **URL**: `/admin-login`
- **ID**: `admin001`
- **パスワード**: `admin123`

#### 利用可能な機能

- ✅ マルチテナント（3つの保育園）
- ✅ 登園退園管理（125+学生データ）
- ✅ 統計ダッシュボード
- ✅ チャット機能
- ✅ 予約申請システム

## 📁 プロジェクト構造

```text
PTSI-App/
├── server.js              # メインサーバーファイル（マルチテナント対応）
├── package.json            # 依存関係とスクリプト
├── admin-dashboard/        # 管理者ダッシュボード（登園退園管理含む） 🆕
├── admin-login/            # 管理者ログイン
├── admin-login-new/        # 新管理者ログインシステム
├── analytics/              # データ分析システム（125+学生対応）
├── chart/                  # データ可視化機能
├── chat/                   # 保護者チャット機能（統一UI）
├── staff-chat/             # 職員チャット機能
├── check-reservation/      # 予約確認機能
├── css/                    # 共通スタイル
├── DB/                     # レガシーCSVデータベース
├── tenant-selection/       # 保育園選択システム 🆕
├── tenant-config/          # テナント設定ファイル 🆕
├── tenant-data/            # テナント別データ管理 🆕
│   ├── himawari-hoikuen/   # ひまわり保育園データ
│   ├── sakura-hoikuen/     # さくら保育園データ
│   ├── momiji-hoikuen/     # もみじ保育園データ
│   └── */attendance/       # 各園の出席データ 🆕
├── docs/                   # 技術仕様書・マニュアル
├── fonts/                  # フォントファイル
├── login/                  # ログイン機能
├── login-select/           # テナント対応ログイン 🆕
├── manuals/                # 操作マニュアル（PDF対応）
└── reservation/            # 予約申請機能（統一UI）
```

## 🔗 主要APIエンドポイント（v3.0新機能）

### 🎯 出席管理API

- `GET /admin/attendance` - 出席データ取得
- `POST /admin/attendance/checkin` - 登園記録
- `POST /admin/attendance/checkout` - 退園記録
- `GET /admin/attendance/stats` - 出席統計

### 🏢 マルチテナントAPI

- `GET /tenant-selection` - 保育園選択画面
- `GET /api/tenants` - テナント一覧取得
- `GET /api/tenant-config/:id` - テナント設定取得

### 📊 既存API（強化済み）

- `GET /admin/stats` - 統計データ（テナント対応）
- `GET /admin/analytics` - 分析データ
- `GET /admin/reservations` - 予約管理
- `GET /admin/students` - 学生管理

## 📚 ドキュメント

詳細な技術仕様書とマニュアルは `PTSI-App/docs/` フォルダにあります：

### 🔧 技術文書

- **技術仕様書 v2.0**: `docs/TECHNICAL_SPECIFICATION.md`
- **API仕様書**: マルチテナント・出席管理API含む
- **ドキュメントガイド**: `docs/README.md`

### 📖 操作マニュアル

- **管理者マニュアル**: 登園退園管理・統計機能の詳細解説
- **保護者マニュアル**: 予約申請・チャット機能の使い方
- **システム運用ガイド**: マルチテナント管理方法

### 🛠 npmスクリプト

```bash
# サーバー起動
npm start

# ドキュメント情報表示
npm run docs

# HTML仕様書をブラウザで開く
npm run docs:open

# PDF生成
npm run docs:pdf
```

## 🚀 導入実績・対応規模

- **👶 対応学生数**: 1テナントあたり125+学生（実証済み）
- **🏢 マルチテナント**: 複数保育園の同時運用対応
- **📊 データ処理**: リアルタイム統計・大量データ可視化
- **💬 同時接続**: チャット機能でのリアルタイム通信
- **📱 レスポンシブ**: PC・タブレット・スマートフォン対応

## 作者

Yujiro Muraoka

## ライセンス

ISC
